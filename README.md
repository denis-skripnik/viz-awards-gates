# viz-awards-gates
## NPM пакет для приложений, награждающих пользователей разных сервисов
### Информация по пакету:
Экспортированы getAwards, withdraw и search.
1. getAwards - не требует аргументов;
2. withdraw: логин в сервисе (тот, что есть в базе данных), логин получателя в VIZ, сумма в SHARES без указания " SHARES". Пример:
ag.withdraw('scadens', 'denis-skripnik', 3.168929);
Сумма SHARES не должна быть больше имеющейся у пользователя в БД.
3. withdrawShares (Не требует вызова в приложении, без аргументов);
4. search: единственный аргумент - логин пользователя.
Пример:
await vag.search('scadens');
5. В config.json вы указываете сервис: он будет проверяться в memo. Пример: "youtube" (прописан в файле по умолчанию).
Также необходимо ввести VIZ логин (Он принимает награды, являясь шлюзом для пользователей выбранного вами сервиса, а также переводит токены в случае запроса на вывод), и активный ключ (необходим для переводов решившим вывести и вывода SHARES).
6. Есть две базы данных: с последним блоком и со списком пользователей сервиса. Во второй указываются логины и их балансы;
7. Пример подключения:
const vag = require('viz-awards-gates');
async function noReturn() {
await vag.getAwards();
}

noReturn();

async function getViz(user, viz_login, amount) {
if (user === true) { // проверяем как-то, что авторизовался в приложении пользователь сервиса, которого награждали
await vag.withdraw(user, viz_login, amount); // выводим ему токены.
}
}
8. На приложение ложится отправка уведомлений о награждении. В начале думал сделать в пакете, но после понял, что это ни к чему, т.к. текст у каждого будет свой;
9. Приложение само хранит где-то логин пользователя сервиса в Viz;
10. Также приложение само определяет подлинность авторизовавшегося пользователя: через oAuth, путём отправки custom_json или memo (блокчейны), как-то ещё.
11. Проведены тесты:
getAwards - не требует аргументов;
withdraw: логин в сервисе (тот, что есть в базе данных), логин получателя в VIZ, сумма в SHARES 
search работает.
12. Функция withdraw возвращает 1, если перевод был; 0, если его не было и -1, если ошибка.