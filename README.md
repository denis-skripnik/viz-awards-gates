# viz-awards-gates
## NPM пакет для приложений, награждающих пользователей различных сервисов/
### Информация по пакету:
Экспортированы getAwards, withdraw и search.
1. getAwards - не требует аргументов.
2. withdraw: логин в сервисе (тот, что есть в базе данных), логин получателя в VIZ, сумма в SHARES без указания " SHARES".
Пример: 
ag.withdraw('scadens', 'denis-skripnik', 3.168929).
Сумма SHARES не должна быть больше имеющейся у пользователя в базе данных.
3. withdrawShares (не требует вызова в приложении, без аргументов).
4. search: единственный аргумент - логин пользователя.
Пример:
await vag.search('scadens');
5. В config.json вы указываете сервис: он будет проверяться в memo. Пример: "youtube" (прописан в файле по умолчанию).
Также необходимо ввести VIZ логин (Он принимает награды, являясь шлюзом для пользователей выбранного вами сервиса, а также переводит токены в случае запроса на вывод), и активный ключ (необходим для переводов решившим вывести и вывода SHARES).
Файл находится после установки пакета в node_modules/viz-awards-gates.
6. Есть две базы данных: с последним блоком и со списком пользователей сервиса. Во второй указываются логины и их балансы;
7. Установка.
В папке приложения выполняете команду:
npm install viz-awards-gates
8. Пример подключения:
```
const vag = require('viz-awards-gates');
async function noReturn() {
await vag.getAwards();
}
noReturn();
async function getViz(user, viz_login, amount) {
if (user === true) { // проверяем, что в приложении авторизовался именно тот пользователь сервиса, кого награждали.
await vag.withdraw(user, viz_login, amount); // выводим ему токены.
}
}
```
9. На приложение ложится отправка уведомлений о награждении. В начале думал сделать в пакете, но после понял, что это ни к чему, т.к. текст у каждого будет свой;
10. Приложение само хранит где-то логин пользователя сервиса в Viz;
11. Также приложение само определяет подлинность авторизовавшегося пользователя: через oAuth, путём отправки custom_json или memo (блокчейны), как-то ещё.
12. Проведены тесты:
getAwards - не требует аргументов;
withdraw: логин в сервисе (тот, что есть в базе данных), логин получателя в VIZ, сумма в SHARES 
search работает.
13. Функция withdraw возвращает 1, если перевод был; 0, если его не было и -1, если ошибка.

## Ещё раз о действиях:
1. Устанавливаете пакет:
npm install viz-awards-gates
2. Идёте в node_modules/viz-awards_gates и открываете файл config.json, после чего настраиваете его так, как написано в пункте 5 предыдущего раздела.
3. Подключаете (пункт 8).
4. Используете.

## Контакты:
Автор - Денис Скрипник.
Telegram: https://t.me/skripnikdenis
Viz аккаунт: https://viz.world/@denis-skripnik/